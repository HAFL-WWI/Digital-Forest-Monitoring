{"id":"../node_modules/ol/control/ScaleLine.js","dependencies":[{"name":"/Users/hk/Sites/digital-forest-monitoring/package.json","includedInParent":true,"mtime":1574333047455},{"name":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/package.json","includedInParent":true,"mtime":1573122283680},{"name":"../Object.js","loc":{"line":17,"column":35},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/control/ScaleLine.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/Object.js"},{"name":"../asserts.js","loc":{"line":18,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/control/ScaleLine.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/asserts.js"},{"name":"./Control.js","loc":{"line":19,"column":20},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/control/ScaleLine.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/control/Control.js"},{"name":"../css.js","loc":{"line":20,"column":35},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/control/ScaleLine.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/css.js"},{"name":"../proj.js","loc":{"line":21,"column":52},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/control/ScaleLine.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/proj.js"},{"name":"../proj/Units.js","loc":{"line":22,"column":22},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/control/ScaleLine.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/proj/Units.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.render = render;\nexports.default = exports.Units = void 0;\n\nvar _Object = require(\"../Object.js\");\n\nvar _asserts = require(\"../asserts.js\");\n\nvar _Control = _interopRequireDefault(require(\"./Control.js\"));\n\nvar _css = require(\"../css.js\");\n\nvar _proj = require(\"../proj.js\");\n\nvar _Units = _interopRequireDefault(require(\"../proj/Units.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/control/ScaleLine\n */\n\n\n/**\n * @type {string}\n */\nvar UNITS_PROP = 'units';\n/**\n * Units for the scale line. Supported values are `'degrees'`, `'imperial'`,\n * `'nautical'`, `'metric'`, `'us'`.\n * @enum {string}\n */\n\nvar Units = {\n  DEGREES: 'degrees',\n  IMPERIAL: 'imperial',\n  NAUTICAL: 'nautical',\n  METRIC: 'metric',\n  US: 'us'\n};\n/**\n * @const\n * @type {Array<number>}\n */\n\nexports.Units = Units;\nvar LEADING_DIGITS = [1, 2, 5];\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-scale-line'] CSS Class name.\n * @property {number} [minWidth=64] Minimum width in pixels.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {HTMLElement|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {Units|string} [units='metric'] Units.\n * @property {boolean} [bar=false] Render scalebars instead of a line.\n * @property {number} [steps=4] Number of steps the scalebar should use. Use even numbers\n * for best results. Only applies when `bar` is `true`.\n * @property {boolean} [text=false] Render the text scale above of the scalebar. Only applies\n * when `bar` is `true`.\n */\n\n/**\n * @classdesc\n * A control displaying rough y-axis distances, calculated for the center of the\n * viewport. For conformal projections (e.g. EPSG:3857, the default view\n * projection in OpenLayers), the scale is valid for all directions.\n * No scale line will be shown when the y-axis distance of a pixel at the\n * viewport center cannot be calculated in the view projection.\n * By default the scale line will show in the bottom left portion of the map,\n * but this can be changed by using the css selector `.ol-scale-line`.\n * When specifying `bar` as `true`, a scalebar will be rendered instead\n * of a scaleline.\n *\n * @api\n */\n\nvar ScaleLine =\n/** @class */\nfunction (_super) {\n  __extends(ScaleLine, _super);\n  /**\n   * @param {Options=} opt_options Scale line options.\n   */\n\n\n  function ScaleLine(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    var className = options.className !== undefined ? options.className : options.bar ? 'ol-scale-bar' : 'ol-scale-line';\n    _this = _super.call(this, {\n      element: document.createElement('div'),\n      render: options.render || render,\n      target: options.target\n    }) || this;\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n\n    _this.innerElement_ = document.createElement('div');\n    _this.innerElement_.className = className + '-inner';\n    _this.element.className = className + ' ' + _css.CLASS_UNSELECTABLE;\n\n    _this.element.appendChild(_this.innerElement_);\n    /**\n     * @private\n     * @type {?import(\"../View.js\").State}\n     */\n\n\n    _this.viewState_ = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.minWidth_ = options.minWidth !== undefined ? options.minWidth : 64;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.renderedVisible_ = false;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.renderedWidth_ = undefined;\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.renderedHTML_ = '';\n\n    _this.addEventListener((0, _Object.getChangeEventType)(UNITS_PROP), _this.handleUnitsChanged_);\n\n    _this.setUnits(options.units || Units.METRIC);\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n\n    _this.scaleBar_ = options.bar || false;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.scaleBarSteps_ = options.steps || 4;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.scaleBarText_ = options.text || false;\n    return _this;\n  }\n  /**\n   * Return the units to use in the scale line.\n   * @return {Units} The units\n   * to use in the scale line.\n   * @observable\n   * @api\n   */\n\n\n  ScaleLine.prototype.getUnits = function () {\n    return this.get(UNITS_PROP);\n  };\n  /**\n   * @private\n   */\n\n\n  ScaleLine.prototype.handleUnitsChanged_ = function () {\n    this.updateElement_();\n  };\n  /**\n   * Set the units to use in the scale line.\n   * @param {Units} units The units to use in the scale line.\n   * @observable\n   * @api\n   */\n\n\n  ScaleLine.prototype.setUnits = function (units) {\n    this.set(UNITS_PROP, units);\n  };\n  /**\n   * @private\n   */\n\n\n  ScaleLine.prototype.updateElement_ = function () {\n    var viewState = this.viewState_;\n\n    if (!viewState) {\n      if (this.renderedVisible_) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n\n      return;\n    }\n\n    var center = viewState.center;\n    var projection = viewState.projection;\n    var units = this.getUnits();\n    var pointResolutionUnits = units == Units.DEGREES ? _Units.default.DEGREES : _Units.default.METERS;\n    var pointResolution = (0, _proj.getPointResolution)(projection, viewState.resolution, center, pointResolutionUnits);\n    var nominalCount = this.minWidth_ * pointResolution;\n    var suffix = '';\n\n    if (units == Units.DEGREES) {\n      var metersPerDegree = _proj.METERS_PER_UNIT[_Units.default.DEGREES];\n      nominalCount *= metersPerDegree;\n\n      if (nominalCount < metersPerDegree / 60) {\n        suffix = '\\u2033'; // seconds\n\n        pointResolution *= 3600;\n      } else if (nominalCount < metersPerDegree) {\n        suffix = '\\u2032'; // minutes\n\n        pointResolution *= 60;\n      } else {\n        suffix = '\\u00b0'; // degrees\n      }\n    } else if (units == Units.IMPERIAL) {\n      if (nominalCount < 0.9144) {\n        suffix = 'in';\n        pointResolution /= 0.0254;\n      } else if (nominalCount < 1609.344) {\n        suffix = 'ft';\n        pointResolution /= 0.3048;\n      } else {\n        suffix = 'mi';\n        pointResolution /= 1609.344;\n      }\n    } else if (units == Units.NAUTICAL) {\n      pointResolution /= 1852;\n      suffix = 'nm';\n    } else if (units == Units.METRIC) {\n      if (nominalCount < 0.001) {\n        suffix = 'Î¼m';\n        pointResolution *= 1000000;\n      } else if (nominalCount < 1) {\n        suffix = 'mm';\n        pointResolution *= 1000;\n      } else if (nominalCount < 1000) {\n        suffix = 'm';\n      } else {\n        suffix = 'km';\n        pointResolution /= 1000;\n      }\n    } else if (units == Units.US) {\n      if (nominalCount < 0.9144) {\n        suffix = 'in';\n        pointResolution *= 39.37;\n      } else if (nominalCount < 1609.344) {\n        suffix = 'ft';\n        pointResolution /= 0.30480061;\n      } else {\n        suffix = 'mi';\n        pointResolution /= 1609.3472;\n      }\n    } else {\n      (0, _asserts.assert)(false, 33); // Invalid units\n    }\n\n    var i = 3 * Math.floor(Math.log(this.minWidth_ * pointResolution) / Math.log(10));\n    var count, width, decimalCount;\n\n    while (true) {\n      decimalCount = Math.floor(i / 3);\n      var decimal = Math.pow(10, decimalCount);\n      count = LEADING_DIGITS[(i % 3 + 3) % 3] * decimal;\n      width = Math.round(count / pointResolution);\n\n      if (isNaN(width)) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n        return;\n      } else if (width >= this.minWidth_) {\n        break;\n      }\n\n      ++i;\n    }\n\n    var html;\n\n    if (this.scaleBar_) {\n      html = this.createScaleBar(width, count, suffix);\n    } else {\n      html = count.toFixed(decimalCount < 0 ? -decimalCount : 0) + ' ' + suffix;\n    }\n\n    if (this.renderedHTML_ != html) {\n      this.innerElement_.innerHTML = html;\n      this.renderedHTML_ = html;\n    }\n\n    if (this.renderedWidth_ != width) {\n      this.innerElement_.style.width = width + 'px';\n      this.renderedWidth_ = width;\n    }\n\n    if (!this.renderedVisible_) {\n      this.element.style.display = '';\n      this.renderedVisible_ = true;\n    }\n  };\n  /**\n   * @private\n   * @param {number} width The current width of the scalebar.\n   * @param {number} scale The current scale.\n   * @param {string} suffix The suffix to append to the scale text.\n   * @returns {string} The stringified HTML of the scalebar.\n   */\n\n\n  ScaleLine.prototype.createScaleBar = function (width, scale, suffix) {\n    var mapScale = '1 : ' + Math.round(this.getScaleForResolution()).toLocaleString();\n    var scaleSteps = [];\n    var stepWidth = width / this.scaleBarSteps_;\n    var backgroundColor = '#ffffff';\n\n    for (var i = 0; i < this.scaleBarSteps_; i++) {\n      if (i === 0) {\n        // create the first marker at position 0\n        scaleSteps.push(this.createMarker('absolute', i));\n      }\n\n      scaleSteps.push('<div>' + '<div ' + 'class=\"ol-scale-singlebar\" ' + 'style=' + '\"width: ' + stepWidth + 'px;' + 'background-color: ' + backgroundColor + ';\"' + '>' + '</div>' + this.createMarker('relative', i) + (\n      /*render text every second step, except when only 2 steps */\n      i % 2 === 0 || this.scaleBarSteps_ === 2 ? this.createStepText(i, width, false, scale, suffix) : '') + '</div>');\n\n      if (i === this.scaleBarSteps_ - 1) {\n        {\n          /*render text at the end */\n        }\n        scaleSteps.push(this.createStepText(i + 1, width, true, scale, suffix));\n      } // switch colors of steps between black and white\n\n\n      if (backgroundColor === '#ffffff') {\n        backgroundColor = '#000000';\n      } else {\n        backgroundColor = '#ffffff';\n      }\n    }\n\n    var scaleBarText;\n\n    if (this.scaleBarText_) {\n      scaleBarText = '<div ' + 'class=\"ol-scale-text\" ' + 'style=\"width: ' + width + 'px;\">' + mapScale + '</div>';\n    } else {\n      scaleBarText = '';\n    }\n\n    var container = '<div ' + 'style=\"display: flex;\">' + scaleBarText + scaleSteps.join('') + '</div>';\n    return container;\n  };\n  /**\n   * Creates a marker at given position\n   * @param {string} position - The position, absolute or relative\n   * @param {number} i - The iterator\n   * @returns {string} The stringified div containing the marker\n   */\n\n\n  ScaleLine.prototype.createMarker = function (position, i) {\n    var top = position === 'absolute' ? 3 : -10;\n    return '<div ' + 'class=\"ol-scale-step-marker\" ' + 'style=\"position: ' + position + ';' + 'top: ' + top + 'px;\"' + '></div>';\n  };\n  /**\n   * Creates the label for a marker marker at given position\n   * @param {number} i - The iterator\n   * @param {number} width - The width the scalebar will currently use\n   * @param {boolean} isLast - Flag indicating if we add the last step text\n   * @param {number} scale - The current scale for the whole scalebar\n   * @param {string} suffix - The suffix for the scale\n   * @returns {string} The stringified div containing the step text\n   */\n\n\n  ScaleLine.prototype.createStepText = function (i, width, isLast, scale, suffix) {\n    var length = i === 0 ? 0 : Math.round(scale / this.scaleBarSteps_ * i * 100) / 100;\n    var lengthString = length + (i === 0 ? '' : ' ' + suffix);\n    var margin = i === 0 ? -3 : width / this.scaleBarSteps_ * -1;\n    var minWidth = i === 0 ? 0 : width / this.scaleBarSteps_ * 2;\n    return '<div ' + 'class=\"ol-scale-step-text\" ' + 'style=\"' + 'margin-left: ' + margin + 'px;' + 'text-align: ' + (i === 0 ? 'left' : 'center') + '; ' + 'min-width: ' + minWidth + 'px;' + 'left: ' + (isLast ? width + 'px' : 'unset') + ';\"' + '>' + lengthString + '</div>';\n  };\n  /**\n   * Returns the appropriate scale for the given resolution and units.\n   * @return {number} The appropriate scale.\n   */\n\n\n  ScaleLine.prototype.getScaleForResolution = function () {\n    var resolution = this.getMap().getView().getResolution();\n    var dpi = 25.4 / 0.28;\n    var mpu = this.viewState_.projection.getMetersPerUnit();\n    var inchesPerMeter = 39.37;\n    return parseFloat(resolution.toString()) * mpu * inchesPerMeter * dpi;\n  };\n\n  return ScaleLine;\n}(_Control.default);\n/**\n * Update the scale line element.\n * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n * @this {ScaleLine}\n * @api\n */\n\n\nfunction render(mapEvent) {\n  var frameState = mapEvent.frameState;\n\n  if (!frameState) {\n    this.viewState_ = null;\n  } else {\n    this.viewState_ = frameState.viewState;\n  }\n\n  this.updateElement_();\n}\n\nvar _default = ScaleLine;\nexports.default = _default;"},"sourceMaps":null,"error":null,"hash":"8463e2d8367df5c0e7e524216fc0b743","cacheData":{"env":{}}}